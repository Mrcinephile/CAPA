<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>게시판 생성</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<style>
	.modal-body{
		display: inline-flex;
	}
	ul {
		list-style: none;
	}
	body {
		background: #98E0AD;
	}
	#container {
		width: 850px;
	    margin-left: auto;
	    margin-right: auto;
	    margin-top: 200px;
	    height: 300px;    
	    border: 1px solid black;
	}
	#board {
		margin-left: auto;
		margin-right: auto;
	}
	h1, h2 {
		text-align : center;
	}
	p {
		text-align : center;
	}
	#home {
		text-decoration: none;
	}
	h1 > a {
		color: white;
	}
	#header {
		margin-top : 50px;
		height : 10px;
	}	
	
</style>
<script>
	$(document).ready(function() {
		hideJob();
		$("#business").on("click", function() {
			jobFunc("#business" ,"#businessList")

		});
		$("#it").on("click", function() {
			jobFunc("#it", "#itList")
		});
		$("#meca").on("click", function() {
			jobFunc("#meca", "#mecaList")
		});
		$("#realEstate").on("click", function() {
			jobFunc("#realEstate", "#realEstateList")
		});
		$("#bank").on("click", function() {
			jobFunc("#bank", "#bankList")
		});
		
		$("#choice").on("click", function() {
			console.log("선택함");
			
			let choice = $("li[set='sel']");
			let choice2 = $('.jsCheckChild:checked');
			
			console.log(choice.text());
			console.log($(".result-footer"));
			$(".result-footer").text();
			let str = "";
			$.each(choice2, function(index, item) {
				str += $(item).val() + ","
			});
			let strarray = str.split(",");
			let tag = '';
			tag += `<input type="text" name="boardtype" value="${choice.text()}"><br>`;
			for(let i = 0; i < strarray.length - 1; i++) {
				tag += `<input type="text" value="${strarray[i]}" readonly>`;
			}
			tag += `<input type="hidden" name="boardjob" value="${str.substring(0, str.length-1)}">`;
			console.log(tag);
			$(".result-footer").html(tag);
			
			/* let cStr = "";
			$(".result-footer").each(function(index, item) {
			 	cStr += "<input type='text' class='choice-result'>"
			 	$(".choice-result").html()
			}); */
		});
	});
	
	function jobFunc(selector1, selector2){
		$("#selectShow").show();
		$(selector2).show();
		$(".jsChildrenList").not(selector2).hide();
		$(selector1).attr("set", "sel");
		$("li").not(selector1).removeAttr("set");
		$(selector1).css("background-color", "lightblue");
		$("li").not(selector1).css("background-color", "white");
	}
	function hideJob(){
		$(".jsChildrenList").hide();
		$("#selectShow").hide();
	}
</script>
</head>
<body>
	<div id="header">
		<h1> <a th:href="@{/}" id="home">로고추가(!!)</a> </h1>
	</div>
	
	<div id="container">

	<h2>[　게시판 생성　]</h2>
	<form th:action="@{/board/createBoard}" method="post" onsubmit="return validate()">
		<p sec:authorize="isAuthenticated()"><span th:text="${#authentication.name}"></span>님</p>
		<table id="board">
			<tr>
				<th>제목</th>
				<td><input type="text" name="boardname" id="boardname"></td>
			</tr>
			<tr>
				<th>직종</th>
				<td>
					<!-- Button trigger modal -->
					<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" style="margin-top:20px">
					  선택하기
					</button>
					
					<!-- Modal -->
					<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
					  <div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <h1 class="modal-title fs-5" id="exampleModalLabel">업계선택</h1>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					      </div>
					      <div class="modal-body">
					      	<div id="industry" class="jsSelectParent">
						        <ul>
						        	<li id="business" class="selectIds">영업</li>
						        	<li id="it" class="selectIds">IT엔지니어</li>
						        	<li id="meca" class="selectIds">제조업</li>
						        	<li id="realEstate" class="selectIds">부동산</li>
						        	<li id="bank" class="selectIds">금융</li>
						        </ul>
					        </div>
					       <div id="job" class="jsChildrenArea">
					       	<div class="jsChildrenList" id="businessList">
					       		<ul>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="service" value="service">서비스</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="sales" value="sales">판매</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="leisure" value="tourism">호텔|레저</label></li>
					       		</ul>
					       	</div>
					       	<div class="jsChildrenList" id="itList">
					       		<ul>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="systemEng" value="sysengineer">시스템엔지니어</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="officeEng" value="companySE">사내SE</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="infraEng" value="infraengineer">인프라엔지니어</label></li>
					       		</ul>
					       	</div>
					       	<div class="jsChildrenList" id="mecaList">
					       		<ul>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="food" value="food">식품</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="beauty" value="cosmetic">화장품</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="car" value="car">자동차</label></li>
					       		</ul>
					       	</div>
					       	<div class="jsChildrenList" id="realEstateList">
					       		<ul>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="houseMan" value="houseMan">아파트관리</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="assetMan" value="assetMan">자산관리</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="housePub" value="housePub">부동산 컨설턴트</label></li>
					       		</ul>
					       	</div>
					       	<div class="jsChildrenList" id="bankList">
					       		<ul>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="banker" value="bank">은행|증권</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="lentbank" value="credit">신용|리스</label></li>
					       			<li><label class="jobItem"><input type="checkbox" class="jsCheckChild" id="insurebank" value="insurance">생명보험|손해보험</label></li>
					       		</ul>
					       	</div>
					       </div>
					      </div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
					        <button type="button" class="btn btn-primary" id="choice" data-bs-dismiss="modal">완료</button>
					      </div>					     
					    </div>
					  </div>
					 </div>
				</td>
			</tr>
			<tr>
				<th id="selectShow">선택하기</th>
				<td>
					<div class="result-footer">
   					</div>
   				</td>
			</tr>
			<tr>
				<td colspan="2"><input type="submit" value="success"> &nbsp;&nbsp;&nbsp;<input type="reset" value="reset"> </td>
			</tr>
		</table>
	</form>
</div>
</body>
</html>